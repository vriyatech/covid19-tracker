{"ast":null,"code":"var _jsxFileName = \"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\src\\\\components\\\\RawTable.js\";\nimport React from 'react';\nimport { useTable, useExpanded, useSortBy, useFilters } from 'react-table';\n\nfunction textFilter(rows, ids, filterValue) {\n  return rows.filter(r => ids.some(id => {\n    const value = r.values[id];\n    return String(value).toLowerCase().includes(String(filterValue).toLowerCase());\n  }));\n} // flatten filter so that the filter can match subrows\n// reference: https://github.com/uqix/reactkit-table/blob/master/src/filter/flatten.js\n\n\nfunction flatten(filter) {\n  return function (rows, ids, filterValue) {\n    const flatRows = treeToFlat(rows).map(r => ({ ...r,\n      // or useFilters would recursively filter subRows\n      subRows: [],\n      depth: 0,\n      xFlat: true\n    }));\n    return filter(flatRows, ids, filterValue);\n  };\n}\n\nfunction treeToFlat(rows) {\n  return [...rows, ...rows.map(r => treeToFlat(r.subRows || [])).reduce((pre, cur) => [...pre, ...cur], [])];\n}\n\nconst RegionFilter = placeholderText => ({\n  column: {\n    filterValue,\n    preFilteredRows,\n    setFilter\n  }\n}) => {\n  return /*#__PURE__*/React.createElement(\"input\", {\n    className: \"data-table-input\",\n    value: filterValue || '',\n    onChange: e => {\n      setFilter(e.target.value || undefined); // Set undefined to remove the filter entirely\n    },\n    placeholder: placeholderText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default function RawTable(props) {\n  const {\n    columns,\n    data,\n    initialState,\n    onRowClick,\n    filterPlaceholder\n  } = props;\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    columns,\n    data,\n    defaultColumn: {\n      Filter: RegionFilter(filterPlaceholder),\n      filter: flatten(textFilter)\n    },\n    initialState,\n    getResetExpandedDeps: false\n  }, useFilters, useSortBy, useExpanded);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"data-table-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, headerGroups[0].headers[1].render('Filter'), /*#__PURE__*/React.createElement(\"table\", Object.assign({\n    className: \"data-table\"\n  }, getTableProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, headerGroups.map((headerGroup, i) => /*#__PURE__*/React.createElement(\"tr\", Object.assign({}, headerGroup.getHeaderGroupProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }), headerGroup.headers.map((column, j) => /*#__PURE__*/React.createElement(\"th\", Object.assign({}, column.getHeaderProps(column.getSortByToggleProps()), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }), column.render('Header')))))), /*#__PURE__*/React.createElement(\"tbody\", Object.assign({}, getTableBodyProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }), rows.map((row, i) => {\n    prepareRow(row);\n    return /*#__PURE__*/React.createElement(\"tr\", Object.assign({\n      id: `table-${row.original.region}`\n    }, row.getRowProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }), row.cells.map((cell, cellIdx) => {\n      return /*#__PURE__*/React.createElement(\"td\", Object.assign({}, cell.getCellProps(), {\n        onClick: cellIdx > 0 ? () => onRowClick(row) : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 41\n        }\n      }), cell.render('Cell'));\n    }));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, rows.length, \" regions\"));\n}","map":{"version":3,"sources":["D:/programming/react/new covid/covid19/src/components/RawTable.js"],"names":["React","useTable","useExpanded","useSortBy","useFilters","textFilter","rows","ids","filterValue","filter","r","some","id","value","values","String","toLowerCase","includes","flatten","flatRows","treeToFlat","map","subRows","depth","xFlat","reduce","pre","cur","RegionFilter","placeholderText","column","preFilteredRows","setFilter","e","target","undefined","RawTable","props","columns","data","initialState","onRowClick","filterPlaceholder","getTableProps","getTableBodyProps","headerGroups","prepareRow","defaultColumn","Filter","getResetExpandedDeps","headers","render","headerGroup","i","getHeaderGroupProps","j","getHeaderProps","getSortByToggleProps","row","original","region","getRowProps","cells","cell","cellIdx","getCellProps","display","length"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useTable, useExpanded, useSortBy, useFilters } from 'react-table'\r\n\r\nfunction textFilter(rows, ids, filterValue) {\r\n    return rows.filter((r) =>\r\n        ids.some((id) => {\r\n            const value = r.values[id]\r\n            return String(value).toLowerCase().includes(String(filterValue).toLowerCase())\r\n        })\r\n    )\r\n}\r\n\r\n// flatten filter so that the filter can match subrows\r\n// reference: https://github.com/uqix/reactkit-table/blob/master/src/filter/flatten.js\r\nfunction flatten(filter) {\r\n    return function(rows, ids, filterValue) {\r\n        const flatRows = treeToFlat(rows).map((r) => ({\r\n            ...r,\r\n            // or useFilters would recursively filter subRows\r\n            subRows: [],\r\n            depth: 0,\r\n            xFlat: true\r\n        }))\r\n        return filter(flatRows, ids, filterValue)\r\n    }\r\n}\r\n\r\nfunction treeToFlat(rows) {\r\n    return [ ...rows, ...rows.map((r) => treeToFlat(r.subRows || [])).reduce((pre, cur) => [ ...pre, ...cur ], []) ]\r\n}\r\n\r\nconst RegionFilter = (placeholderText) => ({ column: { filterValue, preFilteredRows, setFilter } }) => {\r\n    return (\r\n        <input\r\n            className=\"data-table-input\"\r\n            value={filterValue || ''}\r\n            onChange={(e) => {\r\n                setFilter(e.target.value || undefined) // Set undefined to remove the filter entirely\r\n            }}\r\n            placeholder={placeholderText}\r\n        />\r\n    )\r\n}\r\n\r\nexport default function RawTable(props) {\r\n    const { columns, data, initialState, onRowClick, filterPlaceholder } = props\r\n\r\n    const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } = useTable(\r\n        {\r\n            columns,\r\n            data,\r\n            defaultColumn: { Filter: RegionFilter(filterPlaceholder), filter: flatten(textFilter) },\r\n            initialState,\r\n            getResetExpandedDeps: false\r\n        },\r\n        useFilters,\r\n        useSortBy,\r\n        useExpanded\r\n    )\r\n\r\n    return (\r\n        <div className=\"data-table-wrap\">\r\n            {headerGroups[0].headers[1].render('Filter')}\r\n            <table className=\"data-table\" {...getTableProps()}>\r\n                <thead>\r\n                    {headerGroups.map((headerGroup, i) => (\r\n                        <tr {...headerGroup.getHeaderGroupProps()}>\r\n                            {headerGroup.headers.map((column, j) => (\r\n                                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\r\n                                    {column.render('Header')}\r\n                                </th>\r\n                            ))}\r\n                        </tr>\r\n                    ))}\r\n                </thead>\r\n                <tbody {...getTableBodyProps()}>\r\n                    {rows.map((row, i) => {\r\n                        prepareRow(row)\r\n                        return (\r\n                            <tr id={`table-${row.original.region}`} {...row.getRowProps()}>\r\n                                {row.cells.map((cell, cellIdx) => {\r\n                                    return (\r\n                                        <td\r\n                                            {...cell.getCellProps()}\r\n                                            onClick={cellIdx > 0 ? () => onRowClick(row) : null}\r\n                                        >\r\n                                            {cell.render('Cell')}\r\n                                        </td>\r\n                                    )\r\n                                })}\r\n                            </tr>\r\n                        )\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n            <div style={{ display: 'none' }}>{rows.length} regions</div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}