{"ast":null,"code":"import _toConsumableArray from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _objectSpread from\"D:\\\\programming\\\\react\\\\new covid\\\\covid19\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import Select from'react-select';import{GoFold,GoUnfold,GoSearch}from'react-icons/go';import RegionDropdown from'./RegionDropdown';import RegionSelectOption from'./RegionSelectOption';import{formatDate,getDataFromRegion}from'../utils/utils';import*as str from'../utils/strings';import i18n from'../data/i18n.yml';var selectStyles={control:function control(provided,state){return _objectSpread({},provided,{minWidth:240,marginBottom:8,borderRadius:30});},menu:function menu(){return{backgroundColor:'white',boxShadow:'0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',cursor:'pointer'};},option:function option(provided,state){return _objectSpread({},provided,{textAlign:'left',fontSize:12,backgroundColor:state.isFocused?'var(--primary-color-5)':state.isSelected?'#eee':null,color:state.isFocused?'#fff':'#000',cursor:'pointer'});}};var selectStylesDark={control:function control(provided,state){return _objectSpread({},provided,{minWidth:240,marginBottom:8,borderRadius:30});},menu:function menu(){return{backgroundColor:'var(--dark-grey)',boxShadow:'0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',cursor:'pointer'};},option:function option(provided,state){return _objectSpread({},provided,{textAlign:'left',fontSize:12,backgroundColor:state.isFocused?'var(--primary-color-4)':state.isSelected?'#777':null,color:'var(--lighter-grey)',cursor:'pointer'});}};var Region=/*#__PURE__*/function(_Component){_inherits(Region,_Component);var _super=_createSuper(Region);function Region(){var _this;_classCallCheck(this,Region);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOpen:false,value:undefined,options:[],countryOnly:true};_this.toggleOpen=function(){_this.setState(function(state){return{isOpen:!state.isOpen};});};_this.toggleCountryOnly=function(){_this.props.ReactTooltip.hide(_this.regionSelectMore);_this.setState({countryOnly:!_this.state.countryOnly});};_this.onSelectChange=function(selected){_this.toggleOpen();_this.setState({value:selected});_this.props.regionToggle(selected.region);};_this.generateOptions=function(root){var _this$props=_this.props,data=_this$props.data,lang=_this$props.lang,date=_this$props.date,metric=_this$props.metric;var englishRoot=_toConsumableArray(Array(root.length).keys()).map(function(i){return root.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});var options=[];var regionData=getDataFromRegion(data,root);Object.keys(regionData).filter(function(d){return!['confirmedCount','deadCount','curedCount','ENGLISH'].includes(d);}).sort(function(a,b){var aCount=regionData[a][metric][date]?regionData[a][metric][date]:0;var bCount=regionData[b][metric][date]?regionData[b][metric][date]:0;return aCount>bCount?-1:1;}).forEach(function(d){options.push({value:lang==='zh'?[].concat(_toConsumableArray(root),[d]).join(''):[].concat(_toConsumableArray(englishRoot),[regionData[d].ENGLISH]).join(''),region:[].concat(_toConsumableArray(root),[d]),label:/*#__PURE__*/React.createElement(RegionSelectOption,{region:lang==='zh'?[].concat(_toConsumableArray(root),[d]):[].concat(_toConsumableArray(englishRoot),[regionData[d].ENGLISH]),data:regionData[d],date:date,metric:metric})});var childData=getDataFromRegion(data,[].concat(_toConsumableArray(root),[d]));var showSubRegions=[str.CHINA_ZH,str.FRANCE_ZH,str.UK_ZH,str.NETHERLANDS_ZH,str.DENMARK_ZH];if(Object.keys(childData).length>4&&(!_this.state.countryOnly||root.length===0&&showSubRegions.includes(d)))options=[].concat(_toConsumableArray(options),_toConsumableArray(_this.generateOptions([].concat(_toConsumableArray(root),[d]))));});return options;};_this.displayRegionName=function(){var _this$props2=_this.props,currentRegion=_this$props2.currentRegion,data=_this$props2.data,lang=_this$props2.lang;// remove duplicates in case same region occurs at different level (e.g. Japan)\nvar region=_toConsumableArray(new Set(currentRegion));if(lang==='zh'){region=region.join('');// China\nregion=region!==str.CHINA_ZH?region.replace(str.CHINA_ZH,''):str.CHINA_ZH;region=region!==str.INTL_CONVEYANCE_ZH?region.replace(str.INTL_CONVEYANCE_ZH,''):str.INTL_CONVEYANCE_ZH;region=region!==str.MAINLAND_CHINA_ZH?region.replace(str.MAINLAND_CHINA_ZH,''):str.MAINLAND_CHINA_ZH;// France\nregion=region!==\"\".concat(str.FRANCE_ZH).concat(str.METRO_FRANCE_ZH)?region.replace(str.METRO_FRANCE_ZH,''):str.METRO_FRANCE_ZH;region=region!==\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH)?region.replace(\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH),''):\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH);// UK\nregion=region!==\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH)?region.replace(\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH),''):\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH);region=region!==\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH)?region.replace(\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH),''):\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH);return region;}else{if(data==null)return;var englishRegion=_toConsumableArray(Array(currentRegion.length).keys()).map(function(i){return currentRegion.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});englishRegion=_toConsumableArray(new Set(englishRegion));region=englishRegion.reverse().join(', ');// China\nregion=region!==str.CHINA_EN?region.replace(\", \".concat(str.CHINA_EN),''):str.CHINA_EN;region=region!==str.MAINLAND_CHINA_EN?region.replace(\", \".concat(str.MAINLAND_CHINA_EN),''):str.MAINLAND_CHINA_EN;// France\nregion=region!==\"\".concat(str.METRO_FRANCE_EN,\", \").concat(str.FRANCE_EN)?region.replace(\", \".concat(str.METRO_FRANCE_EN),''):str.METRO_FRANCE_EN;region=region!==\"\".concat(str.OVERSEAS_FRANCE_EN,\", \").concat(str.FRANCE_EN)?region.replace(\", \".concat(str.OVERSEAS_FRANCE_EN,\", \").concat(str.FRANCE_EN),''):str.OVERSEAS_FRANCE_EN;// Cruise ship\nregion=region!==str.INTL_CONVEYANCE_EN?region.replace(\", \".concat(str.INTL_CONVEYANCE_EN),''):str.INTL_CONVEYANCE_EN;// USA\nregion=region!==str.US_EN?region.replace(str.US_EN,'US'):str.US_EN;// UK\nregion=region!==str.UK_EN?region.replace(str.UK_EN,'UK'):str.UK_EN;region=region!==\"\".concat(str.OVERSEAS_TERRITORIES_EN,\", \").concat(str.UK_ABBR_EN)?region.replace(\", \".concat(str.OVERSEAS_TERRITORIES_EN,\", \").concat(str.UK_ABBR_EN),''):str.OVERSEAS_TERRITORIES_EN;region=region!==\"\".concat(str.CROWN_DEPENDENCIES_EN,\", \").concat(str.UK_ABBR_EN)?region.replace(\", \".concat(str.CROWN_DEPENDENCIES_EN,\", \").concat(str.UK_ABBR_EN),''):str.CROWN_DEPENDENCIES_EN;return region;}};_this.displayDate=function(){var _this$props3=_this.props,lang=_this$props3.lang,date=_this$props3.date;return formatDate(date,lang);};return _this;}_createClass(Region,[{key:\"componentDidMount\",value:function componentDidMount(){var options=this.generateOptions([]);this.setState({options:options,value:{value:this.props.lang==='zh'?str.GLOBAL_ZH:str.GLOBAL_EN}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.lang!==this.props.lang||prevProps.metric!==this.props.metric||prevProps.date!==this.props.date||prevState.countryOnly!==this.state.countryOnly){var options=this.generateOptions([]);this.setState({options:options});}if(prevState.isOpen!==this.state.isOpen||prevState.countryOnly!==this.state.countryOnly){this.props.ReactTooltip.rebuild();}if(prevProps.currentRegion!==this.props.currentRegion){var _this$props4=this.props,data=_this$props4.data,currentRegion=_this$props4.currentRegion,lang=_this$props4.lang;var englishRegion=_toConsumableArray(Array(currentRegion.length).keys()).map(function(i){return currentRegion.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});this.setState({value:{value:lang==='zh'?currentRegion.join(''):englishRegion.join('')}});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isOpen=_this$state.isOpen,value=_this$state.value,countryOnly=_this$state.countryOnly;if(this.props.data==null)return;var MoreIcon=countryOnly?GoUnfold:GoFold;return/*#__PURE__*/React.createElement(\"div\",{className:\"current-region-wrap\"},/*#__PURE__*/React.createElement(RegionDropdown,{isOpen:isOpen,onClose:this.toggleOpen,target:/*#__PURE__*/React.createElement(\"div\",{className:\"current-region\",onClick:this.toggleOpen},/*#__PURE__*/React.createElement(\"div\",null,this.displayRegionName()),/*#__PURE__*/React.createElement(GoSearch,{size:18,className:\"dropdown-arrow\",style:{transform:'translateY(1px)'}}))},/*#__PURE__*/React.createElement(Select,{classNamePrefix:'region-select',autoFocus:true,backspaceRemovesValue:false,components:{DropdownIndicator:function DropdownIndicator(){return/*#__PURE__*/React.createElement(\"span\",{className:\"region-select-more\",onMouseUp:_this2.toggleCountryOnly,onTouchEnd:_this2.toggleCountryOnly,onMouseEnter:function onMouseEnter(){return _this2.props.ReactTooltip.show(_this2.regionSelectMore);},onMouseLeave:function onMouseLeave(){return _this2.props.ReactTooltip.hide(_this2.regionSelectMore);},ref:function ref(_ref){return _this2.regionSelectMore=_ref;},\"data-tip\":countryOnly?i18n.MORE_REGIONS_HELP_TEXT[_this2.props.lang]:i18n.LESS_REGIONS_HELP_TEXT[_this2.props.lang]},/*#__PURE__*/React.createElement(MoreIcon,{size:16,color:_this2.props.darkMode?'var(--primary-color-4)':'var(--primary-color-5)'}));},IndicatorSeparator:null},controlShouldRenderValue:false,hideSelectedOptions:false,isClearable:false,menuIsOpen:true,onChange:this.onSelectChange,options:this.state.options,placeholder:\"\".concat(i18n.SEARCH[this.props.lang],\" ...... \"),styles:this.props.darkMode?selectStylesDark:selectStyles,tabSelectsValue:false,value:value,noOptionsMessage:function noOptionsMessage(){return i18n.NO_RESULT[_this2.props.lang];}})),/*#__PURE__*/React.createElement(\"div\",{className:\"current-date\"},this.displayDate()));}}]);return Region;}(Component);export{Region as default};","map":{"version":3,"sources":["D:/programming/react/new covid/covid19/src/components/Region.js"],"names":["React","Component","Select","GoFold","GoUnfold","GoSearch","RegionDropdown","RegionSelectOption","formatDate","getDataFromRegion","str","i18n","selectStyles","control","provided","state","minWidth","marginBottom","borderRadius","menu","backgroundColor","boxShadow","cursor","option","textAlign","fontSize","isFocused","isSelected","color","selectStylesDark","Region","isOpen","value","undefined","options","countryOnly","toggleOpen","setState","toggleCountryOnly","props","ReactTooltip","hide","regionSelectMore","onSelectChange","selected","regionToggle","region","generateOptions","root","data","lang","date","metric","englishRoot","Array","length","keys","map","i","slice","regionList","ENGLISH","regionData","Object","filter","d","includes","sort","a","b","aCount","bCount","forEach","push","join","label","childData","showSubRegions","CHINA_ZH","FRANCE_ZH","UK_ZH","NETHERLANDS_ZH","DENMARK_ZH","displayRegionName","currentRegion","Set","replace","INTL_CONVEYANCE_ZH","MAINLAND_CHINA_ZH","METRO_FRANCE_ZH","OVERSEAS_FRANCE_ZH","OVERSEAS_TERRITORIES_ZH","CROWN_DEPENDENCIES_ZH","englishRegion","reverse","CHINA_EN","MAINLAND_CHINA_EN","METRO_FRANCE_EN","FRANCE_EN","OVERSEAS_FRANCE_EN","INTL_CONVEYANCE_EN","US_EN","UK_EN","OVERSEAS_TERRITORIES_EN","UK_ABBR_EN","CROWN_DEPENDENCIES_EN","displayDate","GLOBAL_ZH","GLOBAL_EN","prevProps","prevState","rebuild","MoreIcon","transform","DropdownIndicator","show","ref","MORE_REGIONS_HELP_TEXT","LESS_REGIONS_HELP_TEXT","darkMode","IndicatorSeparator","SEARCH","NO_RESULT"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Select from 'react-select'\r\nimport { GoFold, GoUnfold, GoSearch } from 'react-icons/go'\r\nimport RegionDropdown from './RegionDropdown'\r\nimport RegionSelectOption from './RegionSelectOption'\r\nimport { formatDate, getDataFromRegion } from '../utils/utils'\r\nimport * as str from '../utils/strings'\r\nimport i18n from '../data/i18n.yml'\r\n\r\nconst selectStyles = {\r\n    control: (provided, state) => ({\r\n        ...provided,\r\n        minWidth: 240,\r\n        marginBottom: 8,\r\n        borderRadius: 30\r\n    }),\r\n    menu: () => ({\r\n        backgroundColor: 'white',\r\n        boxShadow: '0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',\r\n        cursor: 'pointer'\r\n    }),\r\n    option: (provided, state) => ({\r\n        ...provided,\r\n        textAlign: 'left',\r\n        fontSize: 12,\r\n        backgroundColor: state.isFocused ? 'var(--primary-color-5)' : state.isSelected ? '#eee' : null,\r\n        color: state.isFocused ? '#fff' : '#000',\r\n        cursor: 'pointer'\r\n    })\r\n}\r\n\r\nconst selectStylesDark = {\r\n    control: (provided, state) => ({\r\n        ...provided,\r\n        minWidth: 240,\r\n        marginBottom: 8,\r\n        borderRadius: 30\r\n    }),\r\n    menu: () => ({\r\n        backgroundColor: 'var(--dark-grey)',\r\n        boxShadow: '0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',\r\n        cursor: 'pointer'\r\n    }),\r\n    option: (provided, state) => ({\r\n        ...provided,\r\n        textAlign: 'left',\r\n        fontSize: 12,\r\n        backgroundColor: state.isFocused ? 'var(--primary-color-4)' : state.isSelected ? '#777' : null,\r\n        color: 'var(--lighter-grey)',\r\n        cursor: 'pointer'\r\n    })\r\n}\r\n\r\nexport default class Region extends Component {\r\n    state = {\r\n        isOpen: false,\r\n        value: undefined,\r\n        options: [],\r\n        countryOnly: true\r\n    }\r\n\r\n    componentDidMount() {\r\n        const options = this.generateOptions([])\r\n        this.setState({ options, value: { value: this.props.lang === 'zh' ? str.GLOBAL_ZH : str.GLOBAL_EN } })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (\r\n            prevProps.lang !== this.props.lang ||\r\n            prevProps.metric !== this.props.metric ||\r\n            prevProps.date !== this.props.date ||\r\n            prevState.countryOnly !== this.state.countryOnly\r\n        ) {\r\n            const options = this.generateOptions([])\r\n            this.setState({ options })\r\n        }\r\n\r\n        if (prevState.isOpen !== this.state.isOpen || prevState.countryOnly !== this.state.countryOnly) {\r\n            this.props.ReactTooltip.rebuild()\r\n        }\r\n\r\n        if (prevProps.currentRegion !== this.props.currentRegion) {\r\n            const { data, currentRegion, lang } = this.props\r\n            const englishRegion = [ ...Array(currentRegion.length).keys() ]\r\n                .map((i) => currentRegion.slice(0, i + 1))\r\n                .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\r\n            this.setState({ value: { value: lang === 'zh' ? currentRegion.join('') : englishRegion.join('') } })\r\n        }\r\n    }\r\n\r\n    toggleOpen = () => {\r\n        this.setState((state) => ({ isOpen: !state.isOpen }))\r\n    }\r\n\r\n    toggleCountryOnly = () => {\r\n        this.props.ReactTooltip.hide(this.regionSelectMore)\r\n        this.setState({\r\n            countryOnly: !this.state.countryOnly\r\n        })\r\n    }\r\n\r\n    onSelectChange = (selected) => {\r\n        this.toggleOpen()\r\n        this.setState({ value: selected })\r\n        this.props.regionToggle(selected.region)\r\n    }\r\n\r\n    generateOptions = (root) => {\r\n        const { data, lang, date, metric } = this.props\r\n        const englishRoot = [ ...Array(root.length).keys() ]\r\n            .map((i) => root.slice(0, i + 1))\r\n            .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\r\n\r\n        let options = []\r\n        const regionData = getDataFromRegion(data, root)\r\n        Object.keys(regionData)\r\n            .filter((d) => ![ 'confirmedCount', 'deadCount', 'curedCount', 'ENGLISH' ].includes(d))\r\n            .sort((a, b) => {\r\n                const aCount = regionData[a][metric][date] ? regionData[a][metric][date] : 0\r\n                const bCount = regionData[b][metric][date] ? regionData[b][metric][date] : 0\r\n                return aCount > bCount ? -1 : 1\r\n            })\r\n            .forEach((d) => {\r\n                options.push({\r\n                    value: lang === 'zh' ? [ ...root, d ].join('') : [ ...englishRoot, regionData[d].ENGLISH ].join(''),\r\n                    region: [ ...root, d ],\r\n                    label: (\r\n                        <RegionSelectOption\r\n                            region={lang === 'zh' ? [ ...root, d ] : [ ...englishRoot, regionData[d].ENGLISH ]}\r\n                            data={regionData[d]}\r\n                            date={date}\r\n                            metric={metric}\r\n                        />\r\n                    )\r\n                })\r\n                const childData = getDataFromRegion(data, [ ...root, d ])\r\n                const showSubRegions = [ str.CHINA_ZH, str.FRANCE_ZH, str.UK_ZH, str.NETHERLANDS_ZH, str.DENMARK_ZH ]\r\n                if (\r\n                    Object.keys(childData).length > 4 &&\r\n                    (!this.state.countryOnly || (root.length === 0 && showSubRegions.includes(d)))\r\n                )\r\n                    options = [ ...options, ...this.generateOptions([ ...root, d ]) ]\r\n            })\r\n\r\n        return options\r\n    }\r\n\r\n    displayRegionName = () => {\r\n        const { currentRegion, data, lang } = this.props\r\n\r\n        // remove duplicates in case same region occurs at different level (e.g. Japan)\r\n        let region = [ ...new Set(currentRegion) ]\r\n\r\n        if (lang === 'zh') {\r\n            region = region.join('')\r\n            // China\r\n            region = region !== str.CHINA_ZH ? region.replace(str.CHINA_ZH, '') : str.CHINA_ZH\r\n            region =\r\n                region !== str.INTL_CONVEYANCE_ZH ? region.replace(str.INTL_CONVEYANCE_ZH, '') : str.INTL_CONVEYANCE_ZH\r\n            region =\r\n                region !== str.MAINLAND_CHINA_ZH ? region.replace(str.MAINLAND_CHINA_ZH, '') : str.MAINLAND_CHINA_ZH\r\n\r\n            // France\r\n            region =\r\n                region !== `${str.FRANCE_ZH}${str.METRO_FRANCE_ZH}`\r\n                    ? region.replace(str.METRO_FRANCE_ZH, '')\r\n                    : str.METRO_FRANCE_ZH\r\n            region =\r\n                region !== `${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`\r\n                    ? region.replace(`${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`, '')\r\n                    : `${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`\r\n\r\n            // UK\r\n            region =\r\n                region !== `${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`\r\n                    ? region.replace(`${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`, '')\r\n                    : `${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`\r\n            region =\r\n                region !== `${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`\r\n                    ? region.replace(`${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`, '')\r\n                    : `${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`\r\n\r\n            return region\r\n        } else {\r\n            if (data == null) return\r\n            let englishRegion = [ ...Array(currentRegion.length).keys() ]\r\n                .map((i) => currentRegion.slice(0, i + 1))\r\n                .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\r\n            englishRegion = [ ...new Set(englishRegion) ]\r\n            region = englishRegion.reverse().join(', ')\r\n\r\n            // China\r\n            region = region !== str.CHINA_EN ? region.replace(`, ${str.CHINA_EN}`, '') : str.CHINA_EN\r\n            region =\r\n                region !== str.MAINLAND_CHINA_EN\r\n                    ? region.replace(`, ${str.MAINLAND_CHINA_EN}`, '')\r\n                    : str.MAINLAND_CHINA_EN\r\n\r\n            // France\r\n            region =\r\n                region !== `${str.METRO_FRANCE_EN}, ${str.FRANCE_EN}`\r\n                    ? region.replace(`, ${str.METRO_FRANCE_EN}`, '')\r\n                    : str.METRO_FRANCE_EN\r\n            region =\r\n                region !== `${str.OVERSEAS_FRANCE_EN}, ${str.FRANCE_EN}`\r\n                    ? region.replace(`, ${str.OVERSEAS_FRANCE_EN}, ${str.FRANCE_EN}`, '')\r\n                    : str.OVERSEAS_FRANCE_EN\r\n\r\n            // Cruise ship\r\n            region =\r\n                region !== str.INTL_CONVEYANCE_EN\r\n                    ? region.replace(`, ${str.INTL_CONVEYANCE_EN}`, '')\r\n                    : str.INTL_CONVEYANCE_EN\r\n\r\n            // USA\r\n            region = region !== str.US_EN ? region.replace(str.US_EN, 'US') : str.US_EN\r\n\r\n            // UK\r\n            region = region !== str.UK_EN ? region.replace(str.UK_EN, 'UK') : str.UK_EN\r\n            region =\r\n                region !== `${str.OVERSEAS_TERRITORIES_EN}, ${str.UK_ABBR_EN}`\r\n                    ? region.replace(`, ${str.OVERSEAS_TERRITORIES_EN}, ${str.UK_ABBR_EN}`, '')\r\n                    : str.OVERSEAS_TERRITORIES_EN\r\n            region =\r\n                region !== `${str.CROWN_DEPENDENCIES_EN}, ${str.UK_ABBR_EN}`\r\n                    ? region.replace(`, ${str.CROWN_DEPENDENCIES_EN}, ${str.UK_ABBR_EN}`, '')\r\n                    : str.CROWN_DEPENDENCIES_EN\r\n\r\n            return region\r\n        }\r\n    }\r\n\r\n    displayDate = () => {\r\n        const { lang, date } = this.props\r\n        return formatDate(date, lang)\r\n    }\r\n\r\n    render() {\r\n        const { isOpen, value, countryOnly } = this.state\r\n        if (this.props.data == null) return\r\n\r\n        const MoreIcon = countryOnly ? GoUnfold : GoFold\r\n\r\n        return (\r\n            <div className=\"current-region-wrap\">\r\n                <RegionDropdown\r\n                    isOpen={isOpen}\r\n                    onClose={this.toggleOpen}\r\n                    target={\r\n                        <div className=\"current-region\" onClick={this.toggleOpen}>\r\n                            <div>{this.displayRegionName()}</div>\r\n                            <GoSearch size={18} className=\"dropdown-arrow\" style={{ transform: 'translateY(1px)' }} />\r\n                        </div>\r\n                    }\r\n                >\r\n                    <Select\r\n                        classNamePrefix={'region-select'}\r\n                        autoFocus\r\n                        backspaceRemovesValue={false}\r\n                        components={{\r\n                            DropdownIndicator: () => (\r\n                                <span\r\n                                    className=\"region-select-more\"\r\n                                    onMouseUp={this.toggleCountryOnly}\r\n                                    onTouchEnd={this.toggleCountryOnly}\r\n                                    onMouseEnter={() => this.props.ReactTooltip.show(this.regionSelectMore)}\r\n                                    onMouseLeave={() => this.props.ReactTooltip.hide(this.regionSelectMore)}\r\n                                    ref={(ref) => (this.regionSelectMore = ref)}\r\n                                    data-tip={\r\n                                        countryOnly ? (\r\n                                            i18n.MORE_REGIONS_HELP_TEXT[this.props.lang]\r\n                                        ) : (\r\n                                            i18n.LESS_REGIONS_HELP_TEXT[this.props.lang]\r\n                                        )\r\n                                    }\r\n                                >\r\n                                    <MoreIcon\r\n                                        size={16}\r\n                                        color={\r\n                                            this.props.darkMode ? 'var(--primary-color-4)' : 'var(--primary-color-5)'\r\n                                        }\r\n                                    />\r\n                                </span>\r\n                            ),\r\n                            IndicatorSeparator: null\r\n                        }}\r\n                        controlShouldRenderValue={false}\r\n                        hideSelectedOptions={false}\r\n                        isClearable={false}\r\n                        menuIsOpen\r\n                        onChange={this.onSelectChange}\r\n                        options={this.state.options}\r\n                        placeholder={`${i18n.SEARCH[this.props.lang]} ...... `}\r\n                        styles={this.props.darkMode ? selectStylesDark : selectStyles}\r\n                        tabSelectsValue={false}\r\n                        value={value}\r\n                        noOptionsMessage={() => i18n.NO_RESULT[this.props.lang]}\r\n                    />\r\n                </RegionDropdown>\r\n                <div className=\"current-date\">{this.displayDate()}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}